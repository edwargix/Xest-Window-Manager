pkgname='Xest-Window-Manager-git'

pkgver=r142.3176112
pkgver() {
  cd "Xest-Window-Manager"
  ( set -o pipefail
    git describe --long 2>/dev/null | sed 's/\([^-]*-g\)/r\1/;s/-/./g' ||
    printf "r%s.%s" "$(git rev-list --count HEAD)" "$(git rev-parse --short HEAD)"
  )
}
pkgrel=1

makedepends=('git' 'stack' 'gcc' 'zlib')
depends=('sdl2_ttf' 'libxss' 'libxinerama' 'libxrandr' 'ttf-dejavu')
optdepends=('compton: A compositor'
            'polybar: System bar'
            'rofi: Program launcher'
            'dunst: Notifications')

backup=('etc/xest/config.dhall' 'etc/xest/config.99.dhall' 'etc/xest/startup.sh' 'etc/xest/actions.dhall')

source=('git+https://github.com/jhgarner/Xest-Window-Manager')
# source=('https://github.com/jhgarner/Xest-Window-Manager/releases/download/')
md5sums=('SKIP')
pkgdesc='The zesty window manager'
url='https://github.com/jhgarner/Xest-Window-Manager'
packager='Jack Garner'
arch=('x86_64')
license=('BSD3')

package() {
  cd "Xest-Window-Manager"
  git checkout arch
  out=$pkgdir
  bash ./install.sh
}
